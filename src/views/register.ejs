<!DOCTYPE html>
<html>
  
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.1/css/all.css" crossorigin="anonymous" />
  <link rel="stylesheet" href="/styles/general.css">
  <link rel="stylesheet" href="/styles/register.css" />
  <title>ToyHub - Register</title>
</head>

<body class="body-register">
  <main class="main-register">
    <form class="register" action="/user/register" method="POST" enctype="multipart/form-data">
      <h1>REGISTRATE <i class="fa-solid fa-right-to-bracket fa-xl"></i></h1>
      <p>¡Compra con mas seguridad y lleva el control de tus pedidos!</p>
      <div class="form-group-register">
        <div class="form-group">
          <input class="form-group-input" type="text" id="name" name="name" value="<%= ( locals.old && old.name ) ? old.name : '' %>"/>
          <label class="form-group-label" for="name">Nombre</label>
          <% if( locals.errors && errors.name ){ %>
            <span class="error-message"><i class="fa-solid fa-circle-exclamation"></i> <%= errors.name.msg %> </span>
        <% } %>
        </div>
        <div class="form-group">
          <input class="form-group-input" type="text" id="lastname" name="lastname"  value="<%= ( locals.old && old.lastname ) ? old.lastname : '' %>"/>
          <label class="form-group-label" for="lastname">Apellido</label>
          <% if( locals.errors && errors.lastname ){ %>
            <span class="error-message"><i class="fa-solid fa-circle-exclamation"></i> <%= errors.lastname.msg %> </span>
        <% } %>
        </div>
        <div class="form-group">
          <input class="form-group-input" type="email" id="email" name="email" value="<%= ( locals.old && old.email ) ? old.email : '' %>" />
          <label class="form-group-label" for="email">Email</label>
          <% if( locals.errors && errors.email ){ %>
            <span class="error-message"><i class="fa-solid fa-circle-exclamation"></i> <%= errors.email.msg %> </span>
        <% } %>
        </div>
        <div class="form-group form-group--image" id="src-file">
          <label class="form-group-label" for="photo">Foto de perfil</label>
          <input class="form-group-input" type="file" id="photo" name="photo" accept="image/*">
          <div class="form-group-image-preview">
            <img width="140" height="150" src="/images/default-user.jpg" alt="Foto de perfil" id="img-file" />
          </div>
          <% if( locals.errors && errors.photo){ %>
            <span class="error-message"><i class="fa-solid fa-circle-exclamation"></i> <%= errors.photo.msg %> </span>
        <% } %>
        </div>
        <div class="form-group">
          <input class="form-group-input" type="number" id="telephone" name="telephone" />
          <label class="form-group-label" for="telephone">Telefono(opcional)</label>
        </div>
        
        <div class="form-group">
          <input class="form-group-input" type="password" id="password" name="password"  value="<%= ( locals.old && old.password ) ? old.password : '' %>"/>
          <label class="form-group-label" for="password">Contraseña</label>
          <% if( locals.errors && errors.password ){ %>
            <span class="error-message"><i class="fa-solid fa-circle-exclamation"></i> <%= errors.password.msg %> </span>
        <% } %>
        </div>
        
        <div class="form-group">
          <input class="form-group-input" type="password" id="confirm_password" name="confirm_password" value="<%= ( locals.old && old.confirm_password ) ? old.confirm_password : '' %>" />
          <label class="form-group-label" for="confirm_password">Confirmar Contraseña</label>
          <% if( locals.errors && errors.confirm_password ){ %>
            <span class="error-message"><i class="fa-solid fa-circle-exclamation"></i> <%= errors.confirm_password.msg %> </span>
        <% } %>
        </div>
      </div>
      <div>
        <input type="submit" value="Crear cuenta" />
        <span> or </span>
        <a class="button-return" href="/"><i class="fa-solid fa-house"></i></a>
      </div>
    </form>
  </main>
</body>
<script>
  const inputPhoto = document.getElementById('photo');
  const imgFile = document.getElementById('img-file');
  inputPhoto.addEventListener('change', (e) => {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = (e) => {
      imgFile.src = e.target.result;
    }
    reader.readAsDataURL(file);
  });
</script>
</html>